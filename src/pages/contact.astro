---
import Layout from '../layouts/Layout.astro';
// 環境変数からFormspreeのIDを取得 (設定されていない場合はダミー)
const FORMSPREE_ENDPOINT = import.meta.env.PUBLIC_FORMSPREE_ENDPOINT || "https://formspree.io/f/YOUR_FORM_ID";
---

<Layout>
    <main class="container mx-auto p-4 md:p-8 max-w-4xl relative z-10 pt-24 min-h-screen flex flex-col items-center">
        <h1 class="text-4xl text-white font-bold drop-shadow-md mb-8 text-center">Contact</h1>

        <div class="grid md:grid-cols-2 gap-8 items-center w-full max-w-4xl">
            <!-- Mailbox Illustration -->
            <div class="flex flex-col items-center justify-center order-1 md:order-2 animate-bounce-soft">
                <div class="w-64 h-64 relative">
                    <img src="/mailbox.png" alt="Mailbox" class="w-full h-full object-contain pixelated drop-shadow-2xl" />
                </div>
                <p class="text-white font-bold mt-4 bg-choco/20 px-4 py-2 rounded-full backdrop-blur-sm">
                    お仕事のご依頼などは<br>こちらのポストへ！
                </p>
            </div>

            <!-- Contact Form -->
            <div class="bg-white/90 p-8 rounded-xl border-4 border-choco shadow-xl relative order-2 md:order-1">
                <!-- Stamp Decoration -->
                <div class="absolute top-[-10px] right-[-10px] w-16 h-16 bg-accent rotate-12 flex items-center justify-center text-white font-bold border-2 border-dashed border-white shadow-md rounded-sm z-20">
                    POST
                </div>

                <form action={FORMSPREE_ENDPOINT} method="POST" class="space-y-6">
                    <div>
                        <label for="name" class="block text-choco font-bold mb-2">Name</label>
                        <input type="text" id="name" name="name" required 
                            class="w-full px-4 py-2 rounded border-2 border-choco/30 focus:border-accent focus:outline-none bg-sky/5 font-pixel placeholder-choco/30"
                            placeholder="なかこ 太郎"
                        />
                    </div>

                    <div>
                        <label for="email" class="block text-choco font-bold mb-2">Email</label>
                        <input type="email" id="email" name="email" required 
                            class="w-full px-4 py-2 rounded border-2 border-choco/30 focus:border-accent focus:outline-none bg-sky/5 font-pixel placeholder-choco/30"
                            placeholder="example@email.com"
                        />
                    </div>

                    <div>
                        <label for="message" class="block text-choco font-bold mb-2">Message</label>
                        <textarea id="message" name="message" rows="5" required 
                            class="w-full px-4 py-2 rounded border-2 border-choco/30 focus:border-accent focus:outline-none bg-sky/5 font-pixel placeholder-choco/30 resize-none"
                            placeholder="お問い合わせ内容をご記入ください..."
                        ></textarea>
                    </div>

                    <button type="submit" class="w-full py-3 bg-accent text-white font-bold text-lg rounded shadow-md border-b-4 border-red-800 active:border-b-0 active:translate-y-1 transition-all hover:bg-accent/90 flex items-center justify-center gap-2">
                        <span>✉️</span> Send Message
                    </button>
                </form>
            </div>
        </div>

        <div class="mt-12 text-center">
            <a href="/" class="inline-block px-6 py-2 bg-choco text-white rounded hover:bg-choco/90 transition-colors">
                ← Back to Top
            </a>
        </div>
    </main>

    <!-- Background Elements -->
    <div class="fixed inset-0 z-0 overflow-hidden pointer-events-none">
        <div class="cloud absolute top-20 right-[20%] w-32 h-12 bg-white rounded-full opacity-60 animate-float-slow"></div>
        <div class="cloud absolute top-60 left-[10%] w-24 h-10 bg-white rounded-full opacity-50 animate-float-medium"></div>
    </div>
</Layout>

<style>
    .pixelated { image-rendering: pixelated; }

    @keyframes bounce-soft {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
    }
    .animate-bounce-soft { animation: bounce-soft 3s ease-in-out infinite; }

    /* Cloud Animations */
    @keyframes float {
        0% { transform: translateX(0); }
        50% { transform: translateX(30px); }
        100% { transform: translateX(0); }
    }
    .animate-float-slow { animation: float 8s ease-in-out infinite; }
    .animate-float-medium { animation: float 6s ease-in-out infinite reverse; }

    .cloud::before, .cloud::after {
        content: '';
        position: absolute;
        background: inherit;
        border-radius: 50%;
    }
    .cloud::before { width: 50%; height: 150%; top: -50%; left: 15%; }
    .cloud::after { width: 50%; height: 120%; top: -40%; right: 15%; }
</style>
